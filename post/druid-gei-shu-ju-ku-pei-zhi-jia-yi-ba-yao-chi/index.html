<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Druidç»™æ•°æ®åº“é…ç½®åŠ ä¸€æŠŠé’¥åŒ™ | Gofly</title>
<link rel="shortcut icon" href="https://13150702172.github.io/favicon.ico?v=1620791601282">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.3.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://13150702172.github.io/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="Druidç»™æ•°æ®åº“é…ç½®åŠ ä¸€æŠŠé’¥åŒ™ | Gofly - Atom Feed" href="https://13150702172.github.io/atom.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">



    <meta name="description" content="ä¸€ã€å‰è¨€
ä»Šå¤©æ—©ä¸Šï¼Œèµ·åºŠæ‰“å¼€çŸ¥ä¹å°±çœ‹åˆ°ä¸€ç¯‡å…³äºDruidçš„ç›¸å…³æ–‡ç« ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬åœ¨å¹³æ—¶å·¥ä½œä¸­å¹¶æ²¡æœ‰è€ƒè™‘çš„é—®é¢˜ï¼Œä¸€ç›´ä»¥æ¥æˆ‘ä»¬åœ¨åšé¡¹ç›®å½“ä¸­ï¼Œåœ¨application.ymlä¸­æ˜æ–‡çš„é…ç½®æ•°æ®åº“çš„å¯†ç ã€‚
spring:
  datasource:
  ..." />
    <meta name="keywords" content="Java" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
    <script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://13150702172.github.io">
  <img class="avatar" src="https://13150702172.github.io/images/avatar.png?v=1620791601282" alt="">
  </a>
  <h1 class="site-title">
    Gofly
  </h1>
  <p class="site-description">
    ç¬¨é¸Ÿå…ˆé£
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          é¦–é¡µ
        </a>
      
    
      
        <a href="/archives" class="menu">
          å½’æ¡£
        </a>
      
    
      
        <a href="/tags" class="menu">
          æ ‡ç­¾
        </a>
      
    
      
        <a href="/post/about" class="menu">
          å…³äº
        </a>
      
    
  </div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              Druidç»™æ•°æ®åº“é…ç½®åŠ ä¸€æŠŠé’¥åŒ™
            </h2>
            <div class="post-info">
              <span>
                2021-05-12
              </span>
              <span>
                8 min read
              </span>
              
                <a href="https://13150702172.github.io/tag/Chs7QG3ph/" class="post-tag">
                  # Java
                </a>
              
            </div>
            
              <img class="post-feature-image" src="https://13150702172.github.io/post-images/druid-gei-shu-ju-ku-pei-zhi-jia-yi-ba-yao-chi.jpeg" alt="">
            
            <div class="post-content-wrapper">
              <div class="post-content">
                <h2 id="ä¸€-å‰è¨€">ä¸€ã€å‰è¨€</h2>
<p>ä»Šå¤©æ—©ä¸Šï¼Œèµ·åºŠæ‰“å¼€<strong>çŸ¥ä¹</strong>å°±çœ‹åˆ°ä¸€ç¯‡å…³äº<strong>Druid</strong>çš„ç›¸å…³æ–‡ç« ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬åœ¨å¹³æ—¶å·¥ä½œä¸­å¹¶æ²¡æœ‰è€ƒè™‘çš„é—®é¢˜ï¼Œä¸€ç›´ä»¥æ¥æˆ‘ä»¬åœ¨åšé¡¹ç›®å½“ä¸­ï¼Œåœ¨<strong>application.yml</strong>ä¸­æ˜æ–‡çš„é…ç½®æ•°æ®åº“çš„å¯†ç ã€‚</p>
<pre><code class="language-yaml">spring:
  datasource:
    #druidé…ç½®
    druid:
      #æ•°æ®åº“é…ç½®
      url: jdbc:mysql://127.0.0.1:3306/gofly?useUnicode=true&amp;characterEncoding=UTF-8&amp;useJDBCCompliantTimezoneShift=true&amp;useLegacyDatetimeCode=false&amp;serverTimezone=GMT%2b8
      username: root
      password: mic123456
      driver-class-name: com.mysql.cj.jdbc.Driver
</code></pre>
<p>è¿™æ ·ä¼šå­˜åœ¨å®‰å…¨çš„é—®é¢˜ï¼Œå¦‚æœæºç æ³„æ¼ï¼Œä¼šä¸ä¼šå¯¼è‡´æ•°æ®åº“é…ç½®æ³„æ¼ï¼Ÿå› ä¸ºé…ç½®æ–‡ä»¶**ï¼ˆapplication.ymlï¼‰**ï¼Œä¹Ÿæ˜¯æºç çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥ä¹Ÿå­˜åœ¨ä¸€å®šçš„é£é™©ï¼Œé‚£ä¹ˆæˆ‘ä»¬åº”è¯¥æ€ä¹ˆåšæ‰å¯ä»¥é¿å…å‘ç”Ÿè¿™æ ·çš„æ„å¤–ï¼š</p>
<pre><code class="language-yaml">ä½¿ç”¨Druid
</code></pre>
<h2 id="äºŒ-æ•°æ®åº“å¯†ç åŠ å¯†">äºŒã€æ•°æ®åº“å¯†ç åŠ å¯†</h2>
<h3 id="1-è·å–ç§é’¥-å…¬é’¥-å¯†ç ">1ã€è·å–ç§é’¥ã€å…¬é’¥ã€å¯†ç </h3>
<p>å¯¹äºåŠ å¯†æ¥è¯´ï¼ŒDruidå·²ç»åšäº†å°è£…ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡å·¥å…·ç±»è·å–</p>
<pre><code class="language-java"> ConfigTools.main(new String[]{&quot;mic12345&quot;});
</code></pre>
<ul>
<li>
<p>**ç§é’¥ï¼š**ç”¨äºå¯†ç çš„åŠ å¯†</p>
<pre><code class="language-java">privateKey:MIIBVQIBADANBgkqhkiG9w0BAQEFAASCAT8wggE7AgEAAkEAkcs8KGKkVUAIrq4T9uFC235nX/9DB8Ww8yqntkI4ofiVOyujPk7BPuhQL9aqSkPs/+Z+Q4SXLbJgZU68/b27nQIDAQABAkBwR7zEvXMh1HbbUGU/tKvwrqCeZdARpEZqf2c6DjXfRovZID4S8y1M606vOB92Tm9zqS/ZK4/398s+JmFZNkthAiEA5+/366Vb6Z+Yvb2dbAL4yG96iIuzaIti+Xi+XTD+aI8CIQCg62ELsoF4ECb6ESEGiKIR7b7XO5gA4snEDwFslWb3EwIhALfIJDDq9GuodMVUbFrb9/oKq5Nq7xxV5nU7QcxiOBTtAiB/SG8kj3d0/mG2HuJehqibQdBX8p1S5g/t8miP+MTO3QIhANjp9o3OTHvhIpd2BKI+kZyPYX5hj2XT4wm/tshQQC9V
</code></pre>
</li>
<li>
<p>**å…¬é’¥ï¼š**ç”¨äºå¯†ç è§£å¯†</p>
</li>
</ul>
<pre><code>publicKey:MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBAJHLPChipFVACK6uE/bhQtt+Z1//QwfFsPMqp7ZCOKH4lTsroz5OwT7oUC/WqkpD7P/mfkOEly2yYGVOvP29u50CAwEAAQ==
</code></pre>
<ul>
<li>åŠ å¯†åçš„å¯†ç </li>
</ul>
<pre><code class="language-java">password:HwJF+sY+WPpKbbG74fcXnIaf40zQoSEYxrXrRX524g9MrRiwHVy+vaTDcvNdHOckuQyR8GM25ut9bltXtoNERQ==
</code></pre>
<blockquote>
<p>ConfigTools.main(new String[]{&quot;mic12345&quot;})æºç </p>
</blockquote>
<pre><code class="language-java">public static void main(String[] args) throws Exception {
    String password = args[0];
    String[] arr = genKeyPair(512);
    System.out.println(&quot;privateKey:&quot; + arr[0]);
    System.out.println(&quot;publicKey:&quot; + arr[1]);
    System.out.println(&quot;password:&quot; + encrypt(arr[0], password));
}
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥çœ‹å‡º</p>
<p><strong>åŠ å¯†åçš„å¯†ç  = encryptï¼ˆç§é’¥,å¯†ç ï¼‰</strong></p>
<p>ç§é’¥å’Œå…¬é’¥æ˜¯æˆå¯¹å‡ºç°çš„ï¼Œä¹Ÿå¯ä»¥è¿™æ ·è®¤ä¸ºï¼š</p>
<ul>
<li>ä½¿ç”¨å…¬é’¥åŠ å¯†ï¼Œä½¿ç”¨ç§é’¥è§£å¯†</li>
<li>ä½¿ç”¨ç§é’¥åŠ å¯†ï¼Œä½¿ç”¨å…¬é’¥è§£å¯†</li>
</ul>
<pre><code class="language-java">#åŠ å¯†æ“ä½œ
 public static String encrypt(String key, String plainText);
</code></pre>
<pre><code class="language-java">#è§£å¯†æ“ä½œ
String passwordPlainText = ConfigTools.decrypt(publicKey, encryptedPassword);
</code></pre>
<h3 id="2-é…ç½®æ–‡ä»¶">2ã€é…ç½®æ–‡ä»¶</h3>
<pre><code class="language-yaml">spring:
  datasource:
    #druidé…ç½®
    druid:
      #æ•°æ®åº“é…ç½®
      url: jdbc:mysql://127.0.0.1:3306/gofly?useUnicode=true&amp;characterEncoding=UTF-8&amp;useJDBCCompliantTimezoneShift=true&amp;useLegacyDatetimeCode=false&amp;serverTimezone=GMT%2b8
      username: root
      password: U6nJPYouTKtv/1KDRpliHva0OkJ7coPcZA2ZzvzBkE330o/UwpokZB/oKsbI1D4416LzuzuacpGQ5cwkGvJrrw==
      driver-class-name: com.mysql.cj.jdbc.Driver
      #è¿‡æ»¤å™¨
      filters: config
      connect-properties:
        config.decrypt: true
        #å…¬é’¥
        config.decrypt.key: MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBAKKzfajGKZRPLt2FR47OdiZ0w85glU2wUssnhidPdwAgDJMsrzT79tTiX0SWpbWPkDuMNxHeURbF9f403BzbtCUCAwEAAQ==

</code></pre>
<blockquote>
<p>è§£é‡Š</p>
</blockquote>
<pre><code class="language-yaml">#è¿™ä¸ªå‚æ•°éœ€è¦ä½¿ç”¨ConfigTools.main(new String[]{&quot;mic12345&quot;})ç”Ÿæˆçš„å¯†ç 
spring:
	datasource:
		druid:
			password: your password

#éœ€è¦é…ç½®è§£å¯†çš„keyï¼ˆå…¬é’¥ï¼‰
spring:
	datasource:
		druid:
		connect-properties:
        config.decrypt: true
        #å…¬é’¥
        config.decrypt.key: ***************
</code></pre>
<h3 id="3-æ³¨æ„">3ã€æ³¨æ„</h3>
<p>æˆ‘ä»¬ä¸Šé¢çš„è¿™æ ·é…ç½®æ–¹æ³•ï¼Œä¹Ÿæ˜¯ä¸å¤ªå®‰å…¨çš„ï¼Œå› ä¸ºå…¬é’¥ç›´æ¥è¢«æš´éœ²åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å¯åŠ¨é¡¹ç›®çš„æ—¶å€™ï¼Œåœ¨<strong>å‘½ä»¤è¡Œ</strong>ä¸­è¿›è¡Œé…ç½®</p>
<blockquote>
<p>ä¿®æ”¹é…ç½®æ–‡ä»¶,å…¬é’¥è·å–æ–¹å¼ä¿®æ”¹ä¸º**${druid.publickey}**</p>
</blockquote>
<pre><code class="language-yaml">spring:
	datasource:
		druid:
		connect-properties:
        config.decrypt: true
        #å…¬é’¥
        config.decrypt.key: ${druid.publickey}
</code></pre>
<pre><code class="language-java">java -jar --druid.publickey=MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBAKKzfajGKZRPLt2FR47OdiZ0w85glU2wUssnhidPdwAgDJMsrzT79tTiX0SWpbWPkDuMNxHeURbF9f403BzbtCUCAwEAAQ== gofly_shiro_v-0.0.1-SNAPSHOT.jar 
</code></pre>
<blockquote>
<p>å‡ºç°å¼‚å¸¸ï¼šjava.lang.IllegalArgumentException: Failed to decrypt.</p>
</blockquote>
<p>å‡ºç°è¿™ä¸ªå¼‚å¸¸çš„åŸå› æ˜¯å› ä¸º<strong>å…¬é’¥</strong>å‡ºç°é”™è¯¯ï¼Œæ›¿æ¢æˆæ–°çš„å…¬é’¥å³å¯</p>
<h2 id="ä¸‰-debug">ä¸‰ã€Debug</h2>
<h3 id="1-åŠ å¯†æµç¨‹">1ã€åŠ å¯†æµç¨‹</h3>
<blockquote>
<p>1.1 å¯¹å¯†ç è¿›è¡ŒåŠ å¯†</p>
</blockquote>
<pre><code class="language-java">ConfigTools.main(new String[]{&quot;mic12345&quot;});
</code></pre>
<blockquote>
<p>1.2 è·å–å…¬é’¥ã€ç§é’¥**ï¼ˆConfigTools.javaï¼‰**</p>
</blockquote>
<pre><code class="language-java">public static void main(String[] args) throws Exception {
  			//ä»argsæ•°ç»„ä¸­è·å–å¯†ç 
        String password = args[0];
  			//ç”Ÿæˆç§é’¥ã€å…¬é’¥
        String[] arr = genKeyPair(512);
  			//è·å–ç§é’¥
        System.out.println(&quot;privateKey:&quot; + arr[0]);
  			//è·å–å…¬é’¥
        System.out.println(&quot;publicKey:&quot; + arr[1]);
        //ä½¿ç”¨ç§é’¥è¿›è¡ŒåŠ å¯†
        System.out.println(&quot;password:&quot; + encrypt(arr[0], password));
	}
</code></pre>
<ul>
<li><strong>String[] arr = genKeyPair(512);</strong></li>
</ul>
<p>è¿™ä¸ªä¸»è¦æ˜¯ç”¨äºç”Ÿæˆ512ä½çš„<strong>ç§é’¥ã€å…¬é’¥</strong></p>
<pre><code class="language-java">public static String[] genKeyPair(int keySize)
			throws NoSuchAlgorithmException, NoSuchProviderException {
  	//ç§é’¥ã€å…¬é’¥åŒ™ç”Ÿæˆ
		byte[][] keyPairBytes = genKeyPairBytes(keySize);
   //ç”¨äºå­˜å‚¨ç§é’¥ã€å…¬é’¥
		String[] keyPairs = new String[2];
		//å¯¹å…¬é’¥ã€ç§é’¥è¿›è¡Œbase64ç¼–ç 
		keyPairs[0] = Base64.byteArrayToBase64(keyPairBytes[0]);
		keyPairs[1] = Base64.byteArrayToBase64(keyPairBytes[1]);
		return keyPairs;
	}
</code></pre>
<ul>
<li><strong>encrypt(arr[0], password)</strong></li>
</ul>
<p>è¿™ä¸ªæ“ä½œæ˜¯ä½¿ç”¨<strong>ç§é’¥</strong>å¯¹å¯†ç è¿›è¡ŒåŠ å¯†</p>
<pre><code class="language-java">public static String encrypt(String key, String plainText) throws Exception {
  //å¦‚æœç§é’¥ä¸ºç©ºï¼Œå°±ä½¿ç”¨é»˜è®¤çš„ç§é’¥ 
  if (key == null) {
      key = DEFAULT_PRIVATE_KEY_STRING;
   }
	//å¯¹ç§é’¥è¿›è¡Œbase64ç¼–ç 
   byte[] keyBytes = Base64.base64ToByteArray(key);
  //è½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„ä»¥åï¼Œè¿›è¡ŒåŠ å¯†
   return encrypt(keyBytes, plainText);
}
</code></pre>
<ul>
<li><strong>encrypt(keyBytes, plainText)</strong></li>
</ul>
<p>ä½¿ç”¨å­—èŠ‚æ•°ç»„**ï¼ˆç§é’¥ï¼‰**å¯¹å¯†ç è¿›è¡ŒåŠ å¯†</p>
<pre><code class="language-java">public static String encrypt(byte[] keyBytes, String plainText)
      throws Exception {
   //ç”Ÿæˆéå¯¹ç§°åŠ å¯†çš„å®ä¾‹
   PKCS8EncodedKeySpec spec = new PKCS8EncodedKeySpec(keyBytes);
   KeyFactory factory = KeyFactory.getInstance(&quot;RSA&quot;, &quot;SunRsaSign&quot;);
   PrivateKey privateKey = factory.generatePrivate(spec);
   Cipher cipher = Cipher.getInstance(&quot;RSA/ECB/PKCS1Padding&quot;);
       try {
       cipher.init(Cipher.ENCRYPT_MODE, privateKey);
       } catch (InvalidKeyException e) {
           //For IBM JDK, åŸå› è¯·çœ‹è§£å¯†æ–¹æ³•ä¸­çš„è¯´æ˜
           RSAPrivateKey rsaPrivateKey = (RSAPrivateKey) privateKey;
           RSAPublicKeySpec publicKeySpec = new RSAPublicKeySpec(rsaPrivateKey.getModulus(), rsaPrivateKey.getPrivateExponent());
           Key fakePublicKey = KeyFactory.getInstance(&quot;RSA&quot;).generatePublic(publicKeySpec);
           cipher = Cipher.getInstance(&quot;RSA&quot;);
           cipher.init(Cipher.ENCRYPT_MODE, fakePublicKey);
       }

   byte[] encryptedBytes = cipher.doFinal(plainText.getBytes(&quot;UTF-8&quot;));
  //å¯¹åŠ å¯†åçš„å¯†ç ï¼Œè¿›è¡Œbase64ç¼–ç 
   String encryptedString = Base64.byteArrayToBase64(encryptedBytes);
	//è¿”å›åˆ°ï¼š System.out.println(&quot;password:&quot; + encrypt(arr[0], password));
   return encryptedString;
}
</code></pre>
<!-- more -->
<h3 id="2-è§£å¯†æµç¨‹">2ã€è§£å¯†æµç¨‹</h3>
<blockquote>
<p>è°ƒç”¨è§£å¯†æ–¹æ³•</p>
</blockquote>
<p>å› ä¸ºæˆ‘ä»¬åœ¨ä¹‹å‰ä½¿ç”¨çš„æ˜¯<strong>ç§é’¥</strong>è¿›è¡ŒåŠ å¯†ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨<strong>å…¬é’¥</strong>è¿›è¡Œè§£å¯†</p>
<pre><code class="language-java">#å¯†ç 
String password = &quot;lZpmr2Mj7oMPDr0lqVYmLqZLDPUSa2HDq/i4UUNnKGS7uASFkzjPDuvpcCRMb0RKNAdYnfzD3tHkN1FTaqUT8A==&quot;;
#å…¬é’¥
String publicKey = &quot;MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBANIMUMTArrlb1Rjm81pBjXRZkVW/0Mr4DDFcDZDY6hPIQRHPw03NNFZSZQw4hP+1mDUlvpisXhR2jRutgWJ9RW8CAwEAAQ==&quot;;
#è§£å¯†æµç¨‹
String decrypt = ConfigTools.decrypt(publicKey, password);
System.out.println(decrypt);
</code></pre>
<ul>
<li><strong>String decrypt = ConfigTools.decrypt(publicKey, password);</strong></li>
</ul>
<p>è¿™ä¸ªæ“ä½œæ˜¯è°ƒç”¨å·¥å…·ç±»çš„<strong>è§£å¯†</strong>æ–¹æ³•</p>
<pre><code class="language-java">public static String decrypt(String publicKeyText, String cipherText)
      throws Exception {
   //è·å–å…¬é’¥
   PublicKey publicKey = getPublicKey(publicKeyText);
	//è§£å¯†æ“ä½œ
   return decrypt(publicKey, cipherText);
}
</code></pre>
<ul>
<li><strong>decrypt(publicKey, cipherText);</strong></li>
</ul>
<pre><code class="language-java">public static String decrypt(PublicKey publicKey, String cipherText)
      throws Exception {
   Cipher cipher = Cipher.getInstance(&quot;RSA/ECB/PKCS1Padding&quot;);
   try {
      cipher.init(Cipher.DECRYPT_MODE, publicKey);
   } catch (InvalidKeyException e) {
           // å› ä¸º IBM JDK ä¸æ”¯æŒç§é’¥åŠ å¯†, å…¬é’¥è§£å¯†, æ‰€ä»¥è¦åè½¬å…¬ç§é’¥
           // ä¹Ÿå°±æ˜¯è¯´å¯¹äºè§£å¯†, å¯ä»¥é€šè¿‡å…¬é’¥çš„å‚æ•°ä¼ªé€ ä¸€ä¸ªç§é’¥å¯¹è±¡æ¬ºéª— IBM JDK
           RSAPublicKey rsaPublicKey = (RSAPublicKey) publicKey;
           RSAPrivateKeySpec spec = new RSAPrivateKeySpec(rsaPublicKey.getModulus(), rsaPublicKey.getPublicExponent());
          //å…¶å®è¿™é‡Œå°±æ˜¯ï¼šå‡çš„ç§é’¥ï¼ŒçœŸæ­£çš„ä¸ºå…¬é’¥ï¼Œå…¬é’¥å‡å†’ä¸ºç§é’¥
           Key fakePrivateKey = KeyFactory.getInstance(&quot;RSA&quot;).generatePrivate(spec);
           cipher = Cipher.getInstance(&quot;RSA&quot;); //It is a stateful object. so we need to get new one.
           cipher.init(Cipher.DECRYPT_MODE, fakePrivateKey);
   }
   
   if (cipherText == null || cipherText.length() == 0) {
      return cipherText;
   }
	 //å¯¹å¯†ç è¿›è¡Œbase64ç¼–ç 
   byte[] cipherBytes = Base64.base64ToByteArray(cipherText);
   byte[] plainBytes = cipher.doFinal(cipherBytes);
	 //å°†åŸå§‹çš„å¯†ç å­—èŠ‚æ•°ç»„ï¼Œè½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œè¿”å›ç»™String decrypt = ConfigTools.decrypt(publicKey, password);
   return new String(plainBytes);
}
</code></pre>
<p>åŠ å¯†å’Œè§£å¯†çš„æ“ä½œï¼Œéƒ½ä¸éœ€è¦äººå·¥è¿›è¡Œå¤„ç†ï¼ŒDruidå·²ç»å¯¹æ“ä½œè¿›è¡Œå°è£…</p>
<p>æ™šå®‰ğŸŒ›ï¼Œæ˜å¤©å¼€å§‹æ­£å¼è¿›å…¥rabbitmqçš„å†…å®¹å­¦ä¹ ï¼Œæˆ‘ä¼šæ¯ä¸€å¤©æ›´æ–°ä¸€ç¯‡å­¦ä¹ çš„æ–‡ç« ï¼Œå› ä¸ºè¿‘æœŸå‡†å¤‡è€ƒä¸€ä¸‹ç½‘ç»œå·¥ç¨‹å¸ˆçš„èŒç§°ï¼Œæ‰€ä»¥ä¹Ÿä¼šæ›´æ–°ä¸€äº›å…³äºç½‘ç»œå·¥ç¨‹å¸ˆçš„å†…å®¹ã€‚</p>

              </div>
              <div class="toc-container">
                <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#%E4%B8%80-%E5%89%8D%E8%A8%80">ä¸€ã€å‰è¨€</a></li>
<li><a href="#%E4%BA%8C-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AF%86%E7%A0%81%E5%8A%A0%E5%AF%86">äºŒã€æ•°æ®åº“å¯†ç åŠ å¯†</a>
<ul>
<li><a href="#1-%E8%8E%B7%E5%8F%96%E7%A7%81%E9%92%A5-%E5%85%AC%E9%92%A5-%E5%AF%86%E7%A0%81">1ã€è·å–ç§é’¥ã€å…¬é’¥ã€å¯†ç </a></li>
<li><a href="#2-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">2ã€é…ç½®æ–‡ä»¶</a></li>
<li><a href="#3-%E6%B3%A8%E6%84%8F">3ã€æ³¨æ„</a></li>
</ul>
</li>
<li><a href="#%E4%B8%89-debug">ä¸‰ã€Debug</a>
<ul>
<li><a href="#1-%E5%8A%A0%E5%AF%86%E6%B5%81%E7%A8%8B">1ã€åŠ å¯†æµç¨‹</a></li>
<li><a href="#2-%E8%A7%A3%E5%AF%86%E6%B5%81%E7%A8%8B">2ã€è§£å¯†æµç¨‹</a></li>
</ul>
</li>
</ul>
</li>
</ul>

              </div>
            </div>
          </article>
        </div>

        
          <div class="next-post">
            <div class="next">ä¸‹ä¸€ç¯‡</div>
            <a href="https://13150702172.github.io/post/hello-gridea/">
              <h3 class="post-title">
                æ‚¨å¥½ï¼ŒGofly
              </h3>
            </a>
          </div>
        

        

        <div class="site-footer">
  Powered by <a href="https://github.com/13150702172?tab=repositories" target="_blank">Gofly</a>
  <a class="rss" href="https://13150702172.github.io/atom.xml" target="_blank">
    <i class="ri-rss-line"></i> RSS
  </a>
</div>

      </div>
    </div>

    <script>
      hljs.initHighlightingOnLoad()

      let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

      // This should probably be throttled.
      // Especially because it triggers during smooth scrolling.
      // https://lodash.com/docs/4.17.10#throttle
      // You could do like...
      // window.addEventListener("scroll", () => {
      //    _.throttle(doThatStuff, 100);
      // });
      // Only not doing it here to keep this Pen dependency-free.

      window.addEventListener("scroll", event => {
        let fromTop = window.scrollY;

        mainNavLinks.forEach((link, index) => {
          let section = document.getElementById(decodeURI(link.hash).substring(1));
          let nextSection = null
          if (mainNavLinks[index + 1]) {
            nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
          }
          if (section.offsetTop <= fromTop) {
            if (nextSection) {
              if (nextSection.offsetTop > fromTop) {
                link.classList.add("current");
              } else {
                link.classList.remove("current");    
              }
            } else {
              link.classList.add("current");
            }
          } else {
            link.classList.remove("current");
          }
        });
      });

    </script>
  </body>
</html>
